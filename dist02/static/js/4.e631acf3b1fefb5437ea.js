webpackJsonp([4],{I3MG:function(t,e){},hEn9:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),i=a.n(n),s=a("exGp"),r=a.n(s),o={data:function(){return{cateList:[],loading:!1,total:0,pagenum:0,pagesize:0,isShowAddCateDialog:!1,addCateForm:{cat_name:"",cat_pid_Arr:[]},cateListData:[]}},created:function(){this.getCateList(),this.loading=!0,this.getCateListData()},methods:{getCateList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return r()(i.a.mark(function a(){var n,s,r,o,l,c;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get("categories",{params:{type:3,pagenum:e,pagesize:5}});case 2:200===(n=a.sent).data.meta.status&&(s=n.data.data,r=s.result,o=s.pagenum,l=s.pagesize,c=s.total,t.cateList=r,t.pagenum=o+1,t.pagesize=l,t.total=c,t.loading=!1);case 4:case"end":return a.stop()}},a,t)}))()},changePage:function(t){this.getCateList(t)},showAddCateDialog:function(){this.isShowAddCateDialog=!0},getCateListData:function(){var t=this;return r()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/categories",{params:{type:2}});case 2:a=e.sent,t.cateListData=a.data.data;case 4:case"end":return e.stop()}},e,t)}))()},addCate:function(){var t=this;return r()(i.a.mark(function e(){var a,n,s,r,o,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.addCateForm,n=a.cat_name,s=a.cat_pid_Arr,r=s[s.length-1],o=s.length,e.next=5,t.$http.post("/categories",{cat_name:n,cat_level:o,cat_pid:r});case 5:201===(l=e.sent).data.meta.status&&(t.$message({type:"success",message:l.data.meta.msg}),t.isShowAddCateDialog=!1,t.getCateList());case 7:case"end":return e.stop()}},e,t)}))()}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"category"},[a("el-button",{attrs:{type:"success",plain:""},on:{click:t.showAddCateDialog}},[t._v("添加分类")]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.cateList,stripe:""}},[a("el-table-tree-column",{attrs:{prop:"cat_name",label:"分类名称",width:"220","tree-key":"cat_id","level-key":"cat_level","parent-key":"cat_pid","indent-size":30}}),t._v(" "),a("el-table-column",{attrs:{label:"是否有效",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.cat_deleted?"否":"是"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",plain:""}}),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",plain:""}})]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pagesize,"current-page":t.pagenum},on:{"current-change":t.changePage}}),t._v(" "),a("el-dialog",{attrs:{title:"添加分类",visible:t.isShowAddCateDialog},on:{"update:visible":function(e){t.isShowAddCateDialog=e}}},[a("el-form",{attrs:{model:t.addCateForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"分类名称"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.addCateForm.cat_name,callback:function(e){t.$set(t.addCateForm,"cat_name",e)},expression:"addCateForm.cat_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"父级名称"}},[a("el-cascader",{attrs:{options:t.cateListData,"change-on-select":"",props:{value:"cat_id",label:"cat_name"}},model:{value:t.addCateForm.cat_pid_Arr,callback:function(e){t.$set(t.addCateForm,"cat_pid_Arr",e)},expression:"addCateForm.cat_pid_Arr"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShowAddCateDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addCate}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(o,l,!1,function(t){a("I3MG")},null,null);e.default=c.exports}});
//# sourceMappingURL=4.e631acf3b1fefb5437ea.js.map